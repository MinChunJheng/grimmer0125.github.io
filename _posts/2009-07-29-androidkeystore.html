---
title: 開發Android時需要準備的金鑰keystore
date: '2009-07-29T16:23:00.005+08:00'
author: Teng-Chieh Kang
tags:
- Android
modified_time: '2009-08-03T23:54:24.883+08:00'
blogger_id: tag:blogger.com,1999:blog-2031747454610917099.post-1874235810871977407
blogger_orig_url: http://q-and-g.blogspot.com/2009/07/androidkeystore.html
---

在開發Android程式時會有兩種情況會需要用到金鑰<br />A. 要把程式放到實體Android手機上執行時<br />B. 使用google API時<br />以下就這兩種情形來說明準備流程<br /><br />A. 需要準備一組屬於開發者的專有keystore，<br />1. 先在eclipse裡在project上按右鍵選android tools -> export unsigned app。<br />2. 使用java提供的keytools (win上是在java安裝目錄下的bin)，<br /><code><br />   keytool -genkey -v keystore developer.keystore -alias developer.keystore -keyalg RSA -validity 20000<br /></code><br />  上述的developer.keystore可自訂名稱。<br />3. 使用java提供的Jarsigner工具來替程式(x.apk)簽署金鑰。<br /><code><br />   jarsigner -verbose -keystore developer.keystore -signedjar x_signd.apk x.apk developer.keystore<br /></code><br />4. 測試程式已上金鑰<br /><code><br />   jarsigner -verify -verbose -certs x_signed.apk<br /></code><br />最後再把程式用usb線傳到手機裡安裝即可。<br /><br />B.當要使用google API時, 要準備一組金鑰來向google申請API的使用，然後把從google那得來的apiKey填到程式裡。若是準備要放在手機上的程式，則要使用開發者個人的金鑰，若是要在模擬機上使用google map等API，則是要使用模擬機的金鑰keystore來申請google apiKey。以下是使用google map API的流程。<br /><br />1. 找出模擬機對應的debug.keystore，以用來申請google map apiKey，若是要使用在手機上，則跳過1。 win xp上debug.keystore是放在<br /><code><br />documents and setting\<user>local settings\application data\android\debug.keystore<br /></user></code><br /><br />2. 利用java的keytool來取得金鑰keystore的MD5 fingerprint，若是開發者金鑰則通常會需要填產生金鑰時的密碼。<br /><code><br />   keytool -list -keystore x.keystore<br /></code><br />3. 把得到的MD5碼填在申請網頁<a href="http://code.google.com/intl/zh-TW/android/maps-api-signup.html">android maps API Key Signup</a> 中的欄位來獲得apiKey。<br />4. 把apiKey填在res/layout/main.xml裡,<br /><code><br />   android:apKey="xxxxxxxxxxxxxxxxxx"<br /></code><br />5. 開始開發程式。<br /><br />參考:<br /><a href="http://code.google.com/intl/zh-TW/android/add-ons/google-apis/mapkey.html#getfingerprint">http://code.google.com/intl/zh-TW/android/add-ons/google-apis/mapkey.html#getfingerprint</a>
